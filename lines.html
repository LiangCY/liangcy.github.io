<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lines</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }

    canvas {
      cursor: pointer;
      position: absolute;
      background: black;
    }

    .dots {
      width: 1200px;
      height: 720px;
      position: absolute;
    }

    .dot {
      position: absolute;
      width: 9px;
      height: 9px;
      margin-left: -4px;
      margin-top: -4px;
      border-radius: 100%;
      background: yellow;
    }
  </style>
</head>
<body>
<canvas id="canvas" width="1366" height="768"></canvas>
<div class="dots">
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>

  var lines = [
    [0, 20, 1366, 20]
  ];

  var canvas;
  var context;

  canvas = document.getElementById("canvas");
  context = canvas.getContext("2d");

  lines.forEach(function (item) {
    var line = drawLine.apply(null, item);

    var $dot = $('<div class="dot"></div>');
    $dot.css('left', item[0]);
    $dot.css('top', item[1]);
    $('.dots').append($dot);
    $dot.on('mousedown', function () {
      var $dot = $(this);
      document.onmouseup = function () {
        document.onmousemove = null;
      };
      document.onmousemove = function (e) {
        var k = line.k;
        var b = line.b;
        if (k !== undefined) {
          if (Math.abs(k) >= 1) {
            var y = e.clientY;
            var x = 1 / k * y - b / k;
            $dot.css('left', x);
            $dot.css('top', y);
          } else {
            x = e.clientX;
            y = k * x + b;
            $dot.css('left', x);
            $dot.css('top', y);
          }
        } else {
          y = e.clientY;
          x = b;
          $dot.css('left', x);
          $dot.css('top', y);
        }
      };
    });
  });


  function drawLine(startX, startY, endX, endY) {
    context.strokeStyle = "white";
    context.lineWidth = 1;
    context.moveTo(startX, startY);
    context.lineTo(endX, endY);
    context.stroke();
    if (endX != startX) {
      var k = (endY - startY) / (endX - startX);
      var b = startY - (endY - startY) * startX / (endX - startX);
    } else {
      k = undefined;
      b = endX;
    }

    return {k: k, b: b}
  }

</script>
</body>
</html>